{% extends 'places_core/base.html' %}{% load i18n civil_tags %}

{% block require_scripts %}<script src="{% module_path 'user-ranking' %}"></script>{% endblock %}

{% block content %}<h1>{% trans "country ranking"|capfirst %}</h1><hr>
<div class="container">
  <div class="row civ-tablelike-heading">
    <div class="col-xs-1">&nbsp;</div>
    <div class="col-xs-3"><a href="{% url_from_params 'o' 'name' %}" data-field="name">{% trans "name"|capfirst %}</a></div>
    <div class="col-xs-2 text-center"><a href="{% url_from_params 'o' 'usercount' %}" data-field="usercount">{% trans "users total"|capfirst %}</a></div>
    <div class="col-xs-2 text-center"><a href="{% url_from_params 'o' 'actioncount' %}" data-field="actioncount">{% trans "actions total"|capfirst %}</a></div>
    <div class="col-xs-2 text-center"><a href="{% url_from_params 'o' 'avg' %}" data-field="avg">{% trans "average points"|capfirst %}</a></div>
    <div class="col-xs-2 text-center">{% trans "active users"|capfirst %}</div>
  </div>
  {% for entry in object_list %}<div class="row civ-tablelike">
    <div class="col-xs-1 text-center"><img src="{{ entry.thumb_url }}" alt="{{ entry }}" class="user-avatar"></div>
    <div class="col-xs-3"><a href="{% url 'ranking-cities' entry.country_code %}">{{ entry }}</a></div>
    <div class="col-xs-2 text-center">{{ entry.usercount }}</div>
    <div class="col-xs-2 text-center">{{ entry.target_actions.count }}</div>
    <div class="col-xs-2 text-center">{{ entry.avg_points|floatformat:2 }}</div>
    <div class="col-xs-2 text-center">{{ entry.active_users }}</div>
  </div>{% endfor %}
</div>
{% include 'places_core/pagination.html' %}{% endblock %}
